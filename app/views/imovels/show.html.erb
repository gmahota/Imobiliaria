<style>
	#map-canvas {
		width: 500px;
		height: 500px;
	}
</style>
  
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>

<link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css">
<link rel="stylesheet" href="http://blueimp.github.io/Gallery/css/blueimp-gallery.min.css">    

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="http://blueimp.github.io/Gallery/js/jquery.blueimp-gallery.min.js"></script>

<script>
document.getElementById('links').onclick = function (event) {
    event = event || window.event;
    var target = event.target || event.srcElement,
        link = target.src ? target.parentNode : target,
        options = {index: link, event: event},
        links = this.getElementsByTagName('a');
    blueimp.Gallery(links, options);
};
</script>


    <script>
function initialize() {
 
  var lat = <%= @imovel.latitude %>
  var lng = <%=  @imovel.longitude %>
  var raio = <%=  @imovel.raio %>
  
  var geocoder;
  
  var mapOptions = {
    zoom: 15,
    center: new google.maps.LatLng(lat,lng),
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };
  var mapDiv = document.getElementById('map-canvas');
  var map = new google.maps.Map(mapDiv, mapOptions);

  
  var myLatlng = new google.maps.LatLng(lat,lng);
  var marker = new google.maps.Marker({
      position: myLatlng,
      map: map,
      title: 'Hello World!'
  });
  
  // Add circle overlay and bind to marker
  var circle = new google.maps.Circle({
    map: map,
    radius:raio,    // metres
    fillColor: '#AA0000'
  });
  circle.bindTo('center', marker, 'position');
  
}

google.maps.event.addDomListener(window, 'load', initialize);

    </script>

<p>

<% @imovel.documentos.each do |doc| %>
      <% if doc.descricao == "Geral" %> 
            <%= image_tag doc.avatar.url, :size => "300x300"%>
          <%end%>
      <%end%>


  
</p>


<div class="accordion" id="accordion2">
  <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">
        Dados Gerais - <%= @imovel.id %>
      </a>
    </div>
    <div id="collapseOne" class="accordion-body collapse in">
      <div class="accordion-inner">
        <p>
          <b>Detalhes:</b>
          <%= @imovel.descriacao %>
        </p>

<p>
  <b>Tipo Imovel:</b>
  <%= @imovel.tipoImovel %>
</p>

<p>
  <b>Tipo de Negocio:</b>
  <%= @imovel.tipoNegocio %>
</p>

<p>
  <b>Estado:</b>
  <%= @imovel.estado %>
</p>

<p>
  <b>Area:</b>
  <%= @imovel.area %>
</p>

<p>
  <b>Preco:</b>
  <span class="price"><%= number_to_currency(@imovel.preco ) %></span>
  
</p>

<p>
  <b>Localizacao:</b>
  <%= @imovel.localizacao %>
  
  <b>Cidade:</b>
  <%= @imovel.cidade %>
</p>

      </div>
    </div>
  </div>
  <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseTwo">
        Galleria de Fotos
      </a>
    </div>
    <div id="collapseTwo" class="accordion-body collapse">
      <div class="accordion-inner">

<!-- The Bootstrap Image Gallery lightbox, should be a child element of the document body -->
<div id="blueimp-gallery" class="blueimp-gallery">
    <!-- The container for the modal slides -->
    <div class="slides"></div>
    <!-- Controls for the borderless lightbox -->
    <h3 class="title"></h3>
    <a class="prev">‹</a>
    <a class="next">›</a>
    <a class="close">×</a>
    <a class="play-pause"></a>
    <ol class="indicator"></ol>
    <!-- The modal dialog, which will be used to wrap the lightbox content -->
    <div class="modal fade">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" aria-hidden="true">&times;</button>
                    <h4 class="modal-title"></h4>
                </div>
                <div class="modal-body next"></div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default pull-left prev">
                        <i class="glyphicon glyphicon-chevron-left"></i>
                        Previous
                    </button>
                    <button type="button" class="btn btn-primary next">
                        Next
                        <i class="glyphicon glyphicon-chevron-right"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

      
        <div id="gallery" data-toggle="modal-gallery" data-target="#modal-gallery" data-selector="div.gallery-item">
          <div id="links">
            <% @imovel.documentos.each do |doc| %>
    
              <% if doc.descricao = "Foto"%>
                <a href="<%= doc.avatar.url%>" title="<%= doc.descricao%>" data-gallery> 
                  <%= image_tag doc.avatar.url, :size => "100x100", :title => doc.descricao %>
                </a>

              <%end%>
            <%end%>
          </div>
        </div>

      </div>
    

    </div>
  </div>
  
  
  <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion3" href="#collapseTree">
         Localização Mapa
      </a>
    </div>
    <div id="collapseTree" class="accordion-body collapse">
      <div class="accordion-inner">
        
         <div id="map-canvas"></div>
           
        
      </div>
    
    </div>
  </div>
</div>  


<% if can? :manage, current_user %> 
<%= link_to 'Editar', edit_imovel_path(@imovel), class: "btn btn-small btn-info" %> |
<%end%>
<%= link_to 'Voltar', imovels_path, class: "btn btn-small btn-danger" %> |
<%= link_to 'Imprimir', imovel_path(@imovel, format: 'pdf')  , class: "btn btn-small btn-info"%> 



